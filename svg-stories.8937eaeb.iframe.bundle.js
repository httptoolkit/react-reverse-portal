/*! For license information please see svg-stories.8937eaeb.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkreact_reverse_portal=self.webpackChunkreact_reverse_portal||[]).push([[815],{"./dist/web/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{KF:()=>createHtmlPortalNode,bL:()=>OutPortal,fq:()=>createSvgPortalNode,oj:()=>InPortal});var extendStatics,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-dom/index.js"),__extends=(extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])},extendStatics(d,b)},function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),createPortalNode=function(elementType,options){var _a,_b,parent,lastPlaceholder,element,initialProps={};switch(elementType){case"html":element=document.createElement(null!==(_a=null==options?void 0:options.containerElement)&&void 0!==_a?_a:"div");break;case"svg":element=document.createElementNS("http://www.w3.org/2000/svg",null!==(_b=null==options?void 0:options.containerElement)&&void 0!==_b?_b:"g");break;default:throw new Error('Invalid element type "'.concat(elementType,'" for createPortalNode: must be "html" or "svg".'))}if(options&&"object"==typeof options&&options.attributes)for(var _i=0,_c=Object.entries(options.attributes);_i<_c.length;_i++){var _d=_c[_i],key=_d[0],value=_d[1];element.setAttribute(key,value)}var portalNode={element,elementType,setPortalProps:function(props){initialProps=props},getInitialPortalProps:function(){return initialProps},mount:function(newParent,newPlaceholder){if(newPlaceholder!==lastPlaceholder){if(portalNode.unmount(),newParent!==parent&&!function(domElement,elementType){var _a,_b,_c,ownerDocument=null!==(_a=domElement.ownerDocument)&&void 0!==_a?_a:document,ownerWindow=null!==(_c=null!==(_b=ownerDocument.defaultView)&&void 0!==_b?_b:ownerDocument.parentWindow)&&void 0!==_c?_c:window;switch(elementType){case"html":return domElement instanceof ownerWindow.HTMLElement;case"svg":return domElement instanceof ownerWindow.SVGElement;default:throw new Error('Unrecognized element type "'.concat(elementType,'" for validateElementType.'))}}(newParent,elementType))throw new Error('Invalid element type for portal: "'.concat(elementType,'" portalNodes must be used with ').concat(elementType," elements, but OutPortal is within <").concat(newParent.tagName,">."));newParent.replaceChild(portalNode.element,newPlaceholder),parent=newParent,lastPlaceholder=newPlaceholder}},unmount:function(expectedPlaceholder){expectedPlaceholder&&expectedPlaceholder!==lastPlaceholder||parent&&lastPlaceholder&&(parent.replaceChild(lastPlaceholder,portalNode.element),parent=void 0,lastPlaceholder=void 0)}};return portalNode},InPortal=function(_super){function InPortal(props){var _this=_super.call(this,props)||this;return _this.addPropsChannel=function(){Object.assign(_this.props.node,{setPortalProps:function(props){_this.setState({nodeProps:props})}})},_this.state={nodeProps:_this.props.node.getInitialPortalProps()},_this}return __extends(InPortal,_super),InPortal.prototype.componentDidMount=function(){this.addPropsChannel()},InPortal.prototype.componentDidUpdate=function(){this.addPropsChannel()},InPortal.prototype.render=function(){var _this=this,_a=this.props,children=_a.children,node=_a.node;return react_dom__WEBPACK_IMPORTED_MODULE_1__.createPortal(react__WEBPACK_IMPORTED_MODULE_0__.Children.map(children,function(child){return react__WEBPACK_IMPORTED_MODULE_0__.isValidElement(child)?react__WEBPACK_IMPORTED_MODULE_0__.cloneElement(child,_this.state.nodeProps):child}),node.element)},InPortal}(react__WEBPACK_IMPORTED_MODULE_0__.PureComponent),OutPortal=function(_super){function OutPortal(props){var _this=_super.call(this,props)||this;return _this.placeholderNode=react__WEBPACK_IMPORTED_MODULE_0__.createRef(),_this.passPropsThroughPortal(),_this}return __extends(OutPortal,_super),OutPortal.prototype.passPropsThroughPortal=function(){var propsForTarget=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(propsForTarget)},OutPortal.prototype.componentDidMount=function(){var node=this.props.node;this.currentPortalNode=node;var placeholder=this.placeholderNode.current,parent=placeholder.parentNode;node.mount(parent,placeholder),this.passPropsThroughPortal()},OutPortal.prototype.componentDidUpdate=function(){var node=this.props.node;this.currentPortalNode&&node!==this.currentPortalNode&&(this.currentPortalNode.unmount(this.placeholderNode.current),this.currentPortalNode.setPortalProps({}),this.currentPortalNode=node);var placeholder=this.placeholderNode.current,parent=placeholder.parentNode;node.mount(parent,placeholder),this.passPropsThroughPortal()},OutPortal.prototype.componentWillUnmount=function(){var node=this.props.node;node.unmount(this.placeholderNode.current),node.setPortalProps({})},OutPortal.prototype.render=function(){var tagName=this.props.node.element.tagName,type="html"===this.props.node.elementType?tagName.toLowerCase():tagName;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(type,{ref:this.placeholderNode})},OutPortal}(react__WEBPACK_IMPORTED_MODULE_0__.PureComponent),createHtmlPortalNode=createPortalNode.bind(null,"html"),createSvgPortalNode=createPortalNode.bind(null,"svg")},"./node_modules/react/cjs/react-jsx-runtime.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{var f=__webpack_require__("./node_modules/react/index.js"),k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function q(c,a,g){var b,d={},e=null,h=null;for(b in void 0!==g&&(e=""+g),void 0!==a.key&&(e=""+a.key),void 0!==a.ref&&(h=a.ref),a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l,exports.jsx=q,exports.jsxs=q},"./node_modules/react/jsx-runtime.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/react/cjs/react-jsx-runtime.production.min.js")},"./stories/svg.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CanMoveContentAroundWithinSVGs:()=>CanMoveContentAroundWithinSVGs,CanPassAttributesOptionToCreateSvgPortalNode:()=>CanPassAttributesOptionToCreateSvgPortalNode,PersistDOMWhileMovingWithinSVGs:()=>PersistDOMWhileMovingWithinSVGs,WorksWithSVGs:()=>WorksWithSVGs,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/web/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={title:"SVG Portals"},WorksWithSVGs=()=>{const portalNode=(0,___WEBPACK_IMPORTED_MODULE_1__.fq)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("svg",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("rect",{x:0,y:0,width:300,height:50,fill:"gray"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("rect",{x:0,y:50,width:300,height:50,fill:"lightblue"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("svg",{x:30,y:10,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.oj,{node:portalNode,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("text",{alignmentBaseline:"text-before-edge",dominantBaseline:"hanging",fill:"red",children:"test"})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("svg",{x:30,y:70,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.bL,{node:portalNode})})]})})},CanMoveContentAroundWithinSVGs=()=>{const portalNode=(0,___WEBPACK_IMPORTED_MODULE_1__.fq)();return react__WEBPACK_IMPORTED_MODULE_0__.createElement(()=>{const[inFirstSvg,setSvgToUse]=react__WEBPACK_IMPORTED_MODULE_0__.useState(!1);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("button",{onClick:()=>setSvgToUse(!inFirstSvg),children:"Click to move the OutPortal within the SVG"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("hr",{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("svg",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.oj,{node:portalNode,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("text",{alignmentBaseline:"text-before-edge",dominantBaseline:"hanging",fill:"red",children:"test"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("rect",{x:0,y:0,width:300,height:50,fill:"gray"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("rect",{x:0,y:50,width:300,height:50,fill:"lightblue"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("svg",{x:30,y:10,children:inFirstSvg&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.bL,{node:portalNode})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("svg",{x:30,y:70,children:!inFirstSvg&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.bL,{node:portalNode})})]})]})})},PersistDOMWhileMovingWithinSVGs=()=>{const portalNode=(0,___WEBPACK_IMPORTED_MODULE_1__.fq)();return react__WEBPACK_IMPORTED_MODULE_0__.createElement(()=>{const[inFirstSvg,setSvgToUse]=react__WEBPACK_IMPORTED_MODULE_0__.useState(!1);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("button",{onClick:()=>setSvgToUse(!inFirstSvg),children:"Click to move the OutPortal within the SVG"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("hr",{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("svg",{width:500,height:800,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.oj,{node:portalNode,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("foreignObject",{width:"480",height:"360",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("video",{src:"https://media.giphy.com/media/l0HlKghz8IvrQ8TYY/giphy.mp4",controls:!0,loop:!0})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("rect",{x:0,y:0,width:500,height:380,fill:"gray"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("rect",{x:0,y:380,width:500,height:380,fill:"lightblue"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("svg",{x:10,y:10,children:inFirstSvg&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.bL,{node:portalNode})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("svg",{x:10,y:410,children:!inFirstSvg&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.bL,{node:portalNode})})]})]})})},CanPassAttributesOptionToCreateSvgPortalNode=()=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(()=>{const[hasAttrOption,setHasAttrOption]=react__WEBPACK_IMPORTED_MODULE_0__.useState(!1),portalNode=(0,___WEBPACK_IMPORTED_MODULE_1__.fq)(hasAttrOption?{attributes:{stroke:"blue"}}:void 0);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("button",{onClick:()=>setHasAttrOption(!hasAttrOption),children:"Click to pass attributes option to the intermediary svg"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("hr",{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("svg",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.oj,{node:portalNode,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"lightblue"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("svg",{x:30,y:10,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(___WEBPACK_IMPORTED_MODULE_1__.bL,{node:portalNode})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("br",{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("text",{children:hasAttrOption?'const portalNode = createSvgPortalNode({ attributes: { stroke: "blue" } });':"const portalNode = createSvgPortalNode();"})]})}),__namedExportsOrder=["WorksWithSVGs","CanMoveContentAroundWithinSVGs","PersistDOMWhileMovingWithinSVGs","CanPassAttributesOptionToCreateSvgPortalNode"];WorksWithSVGs.parameters={...WorksWithSVGs.parameters,docs:{...WorksWithSVGs.parameters?.docs,source:{originalSource:'() => {\n  const portalNode = createSvgPortalNode();\n\n  // From https://github.com/httptoolkit/react-reverse-portal/issues/2\n  return <div>\n        <svg>\n            <rect x={0} y={0} width={300} height={50} fill="gray"></rect>\n            <rect x={0} y={50} width={300} height={50} fill="lightblue"></rect>\n            <svg x={30} y={10}>\n                <InPortal node={portalNode}>\n                    <text alignmentBaseline="text-before-edge" dominantBaseline="hanging" fill="red">\n                        test\n                    </text>\n                </InPortal>\n            </svg>\n            <svg x={30} y={70}>\n                <OutPortal node={portalNode} />\n            </svg>\n        </svg>\n    </div>;\n}',...WorksWithSVGs.parameters?.docs?.source}}},CanMoveContentAroundWithinSVGs.parameters={...CanMoveContentAroundWithinSVGs.parameters,docs:{...CanMoveContentAroundWithinSVGs.parameters?.docs,source:{originalSource:'() => {\n  const portalNode = createSvgPortalNode();\n  return React.createElement(() => {\n    const [inFirstSvg, setSvgToUse] = React.useState(false);\n    return <div>\n            <button onClick={() => setSvgToUse(!inFirstSvg)}>\n                Click to move the OutPortal within the SVG\n            </button>\n\n            <hr />\n\n            <svg>\n                <InPortal node={portalNode}>\n                    <text alignmentBaseline="text-before-edge" dominantBaseline="hanging" fill="red">\n                        test\n                    </text>\n                </InPortal>\n\n                <rect x={0} y={0} width={300} height={50} fill="gray"></rect>\n                <rect x={0} y={50} width={300} height={50} fill="lightblue"></rect>\n\n                <svg x={30} y={10}>\n                    {inFirstSvg && <OutPortal node={portalNode} />}\n                </svg>\n                <svg x={30} y={70}>\n                    {!inFirstSvg && <OutPortal node={portalNode} />}\n                </svg>\n            </svg>\n        </div>;\n  });\n}',...CanMoveContentAroundWithinSVGs.parameters?.docs?.source}}},PersistDOMWhileMovingWithinSVGs.parameters={...PersistDOMWhileMovingWithinSVGs.parameters,docs:{...PersistDOMWhileMovingWithinSVGs.parameters?.docs,source:{originalSource:'() => {\n  const portalNode = createSvgPortalNode();\n  return React.createElement(() => {\n    const [inFirstSvg, setSvgToUse] = React.useState(false);\n    return <div>\n            <button onClick={() => setSvgToUse(!inFirstSvg)}>\n                Click to move the OutPortal within the SVG\n            </button>\n\n            <hr />\n\n            <svg width={500} height={800}>\n                <InPortal node={portalNode}>\n                    <foreignObject width="480" height="360">\n                        <video src="https://media.giphy.com/media/l0HlKghz8IvrQ8TYY/giphy.mp4" controls loop />\n                    </foreignObject>\n                </InPortal>\n\n                <rect x={0} y={0} width={500} height={380} fill="gray"></rect>\n                <rect x={0} y={380} width={500} height={380} fill="lightblue"></rect>\n\n                <svg x={10} y={10}>\n                    {inFirstSvg && <OutPortal node={portalNode} />}\n                </svg>\n                <svg x={10} y={410}>\n                    {!inFirstSvg && <OutPortal node={portalNode} />}\n                </svg>\n            </svg>\n        </div>;\n  });\n}',...PersistDOMWhileMovingWithinSVGs.parameters?.docs?.source}}},CanPassAttributesOptionToCreateSvgPortalNode.parameters={...CanPassAttributesOptionToCreateSvgPortalNode.parameters,docs:{...CanPassAttributesOptionToCreateSvgPortalNode.parameters?.docs,source:{originalSource:'() => {\n  return React.createElement(() => {\n    const [hasAttrOption, setHasAttrOption] = React.useState(false);\n    const portalNode = createSvgPortalNode(hasAttrOption ? {\n      attributes: {\n        stroke: \'blue\'\n      }\n    } : undefined);\n    return <div>\n            <button onClick={() => setHasAttrOption(!hasAttrOption)}>\n                Click to pass attributes option to the intermediary svg\n            </button>\n\n            <hr />\n\n            <svg>\n                <InPortal node={portalNode}>\n                    <circle cx="50" cy="50" r="40" fill="lightblue" />\n                </InPortal>\n\n                <svg x={30} y={10}>\n                  <OutPortal node={portalNode} />\n                </svg>\n            </svg>\n\n            <br />\n\n            <text>{!hasAttrOption ? `const portalNode = createSvgPortalNode();` : `const portalNode = createSvgPortalNode({ attributes: { stroke: "blue" } });`}</text>\n        </div>;\n  });\n}',...CanPassAttributesOptionToCreateSvgPortalNode.parameters?.docs?.source}}}}}]);